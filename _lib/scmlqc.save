qqqqqq




qqqqqqqqqqqqqqqqqqq
clear
reset
#!C:\php5\php.exe -q
<?php 

$root = './';
$patterns = array(
	'\. ?\. ?\.',
	'( ){2,}',
	'( )(</[^>]*>)',
	'( +)$',
	'(\n){2,}',
	'(\r){2,}',
	'(</i>)([A-Za-z]+)',
	'([A-Za-z]+)(<i>)',
	'(</b>)([A-Za-z]+)',
	'([A-Za-z]+)(<b>)',
	'(<i>)( *)(</i>)',
	'(<b>)( *)(</b>)',
	'(<[^/>]*>)(</[^>]*>)',
	'(&lt;)',
	'(&gt;)'
);

require '/scripts/_lib/consoleIO';

IO::sT( 'Performing ScML QC Checklist Operations' );
IO::sL( 'Scanning directory for pattern ./*.scml' );

$dir = scandir( $root );
$files = array();
$contents = array();
foreach( $dir as $i => $f )
{
	$ext = pathinfo( $f, PATHINFO_EXTENSION );
	if( $ext === 'scml' )
	{
		IO::o( 'Reading ' . $f . '...' );
		$files[] = $f;
		$contents[] = file_get_contents( $root . $f );
	}
}

IO::eL();

IO::oA( 'Files found: '.sizeof($files));

if( sizeof( $files ) === 0 )
{
	IO::e( 'Could not find any file matches...' );
}

for( $i=0; $i<sizeof( $patterns ); $i++ )
{
	IO::sL( 'Searching for pattern "'.$patterns[$i].'"' );
	for( $j=0; $j<sizeof($files); $j++ )
	{
		$matches = array();
		preg_match_all( '/'.$patterns[$i].'/', $contents[$j], $matches );
		if( sizeof( $matches[0] ) !== 0 )
		{
			IO::o( 'Found in file "'.$files[$j].'"' );
		}
	}

	IO::eL();

}
/*
for( $i=0; $i<sizeof( $files ); $i++ )
{
	for( $j=0; $j<sizeof( $patterns ); $j++ )
	{
		$matches = array();
		preg_match_all( '/'.$patterns[$j].'/', $contents[$i], $matches );
		if( sizeof( $matches[0] ) !== 0 )
		{
			IO::o( "Found pattern \"".$patterns[$j]."\" in ".$files[$i], IO::LevelWarning );
		}
	}
}
*/

// need to finish this ;=)

IO::o( 'All done - exiting...' );
exit( 0 );

?>
